model ArbitrageOpportunity {
  id        String   @id @default(cuid())
  symbol    String
  
  // Route details
  buyExchange  String
  sellExchange String
  buyPrice     Float
  sellPrice    Float
  profit       Float
  totalFee     Float
  
  simulatedTrade SimulatedTrade?
  
  // Blockchain Status
  status      String   @default("DETECTED") // DETECTED, ON_CHAIN, FAILED
  txHash      String?
  blockNumber Int?
  error       String?  // To store error messages if it fails

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([status])
  @@map("arbitrage_opportunities")
}

model SimulatedTrade {
  id            String   @id @default(cuid())
  opportunityId String   @unique
  opportunity   ArbitrageOpportunity @relation(fields: [opportunityId], references: [id], onDelete: Cascade)

  symbol       String
  buyExchange  String
  sellExchange String
  buyPrice     Float
  sellPrice    Float

  amountUsd        Float
  estimatedProfit  Float

  createdAt DateTime @default(now())

  @@index([symbol])
  @@map("simulated_trades")
}
